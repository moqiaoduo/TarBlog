"use strict";$(function(){var e=$("#file-select"),t=document.getElementById("upload");function n(e){var t=new FormData,n=e.name;"zip"===n.substring(n.lastIndexOf(".")+1)?(t.append("file",e),$.ajax({url:$("#upload-url").val(),type:"post",cache:!1,data:t,contentType:!1,processData:!1,dataType:"json",error:function(){alert("上传失败，请重试"),$(this).remove()},success:function(e){e.success?upload_success&&upload_success():(alert("上传失败，错误信息："+e.msg),$(this).remove())}})):alert("仅支持zip格式的安装包")}t.addEventListener("drop",function(e){$(e.target).removeClass("drag"),n(e.dataTransfer.files[0])},!1),t.addEventListener("dragleave",function(e){$(e.target).removeClass("drag")}),t.addEventListener("dragover",function(e){$(e.target).addClass("drag")}),t.addEventListener("click",function(){e.trigger("click")}),e.on("change",function(){n(this.files[0]),$(this).val("")}),document.addEventListener("dragleave",function(e){e.preventDefault()},!1),document.addEventListener("drop",function(e){e.preventDefault()},!1),document.addEventListener("dragenter",function(e){e.preventDefault()},!1),document.addEventListener("dragover",function(e){e.preventDefault()},!1)});